# ✅ **CHECKLIST PRÉ-DESENVOLVIMENTO**

## 📋 **Template de Solicitação Ideal**

Para garantir implementação consistente, toda solicitação deve incluir:

```markdown
## Entidade: [Nome]

### Schema SQL:
[Schema completo com FKs e constraints]

### Dados Iniciais:
[Lista dos registros iniciais necessários]

### Endpoints Necessários:
- [ ] Apenas listagem de ativos (/ativos)
- [ ] CRUD completo
- [ ] Endpoints customizados: [especificar]

### Regras de Negócio:
- [Regra 1]
- [Regra 2]

### Relacionamentos:
- [Especificar se precisa de relacionamentos bidirecionais]
- [DTOs devem incluir objetos completos ou apenas IDs?]
```

---

## 🔍 **Perguntas de Validação (Responder SIM/NÃO)**

### **📊 Escopo & Complexidade**
1. ❓ **Esta funcionalidade é realmente necessária AGORA?**
2. ❓ **Posso implementar de forma mais simples?**
3. ❓ **Esta mudança quebra a arquitetura existente?**
4. ❓ **Preciso de CRUD completo ou apenas consulta?**

### **🏗️ Implementação Técnica**
5. ❓ **Vou usar MapStruct para mapeamentos?**
6. ❓ **Os relacionamentos JPA são necessários ou posso usar apenas IDs?**
7. ❓ **Esta entidade precisa de índices específicos?**
8. ❓ **Vou seguir o padrão Entity→DTO→Mapper→Repository→Service→Controller?**

### **🔒 Segurança & Endpoints**
9. ❓ **Esta funcionalidade precisa de autenticação/autorização?**
10. ❓ **Vou usar `@WithMockUser` nos testes de controller?**
11. ❓ **O endpoint retorna objeto direto ou `ResponseEntity`?**
12. ❓ **Preciso configurar validações específicas (@Valid, @NotNull, etc.)?**

### **🧪 Testes & Qualidade**
13. ❓ **Vou criar testes para TODAS as camadas (Repository, Service, Controller)?**
14. ❓ **Os testes incluem casos de erro e edge cases?**
15. ❓ **Configurei UTF-8 em todas as partes necessárias?**
16. ❓ **Os logs estão usando `@Slf4j` com níveis apropriados?**

### **⚙️ Configurações & Deploy**
17. ❓ **Preciso atualizar schema.sql e data.sql?**
18. ❓ **Vou adicionar novas dependências no pom.xml?**
19. ❓ **Esta mudança afeta profiles do Spring (dev/test/prod)?**
20. ❓ **Preciso atualizar documentação ou READMEs?**

---

## 🎯 **Regras de Validação Automática**

### **🚨 BLOQUEADORES (Parar implementação se TRUE)**
- **Se NÃO para 1**: Questionar necessidade real
- **Se NÃO para 5**: Usar MapStruct obrigatório
- **Se NÃO para 8**: Seguir padrão arquitetural obrigatório
- **Se NÃO para 13**: Testes são obrigatórios

### **⚠️ ALERTAS (Revisar abordagem se TRUE)**
- **Se SIM para 3**: Revisar impacto arquitetural
- **Se SIM para 7**: Questionar se índices são necessários
- **Se SIM para 18-20**: Planejar impacto em outras partes

### **✅ IMPLEMENTAÇÃO PADRÃO (Se não especificado)**
- **Endpoints**: Apenas `/ativos` (GET)
- **DTOs**: Relacionamentos como IDs, não objetos
- **Relacionamentos JPA**: `@ManyToOne` com `LAZY`
- **Testes**: Repository + Service + Controller
- **Logs**: `@Slf4j` com `debug` para operações

---

## 📝 **Exemplo de Solicitação Completa**

```markdown
## Entidade: Linha

### Schema SQL:
CREATE TABLE linhas (
    id                  BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome               VARCHAR(80) UNIQUE NOT NULL,
    orixa_regente_id   BIGINT NOT NULL,
    orixa_adjunto_id   BIGINT,
    descricao          TEXT NOT NULL,
    caracteristicas    TEXT,
    cores              VARCHAR(100),
    elementos_trabalho VARCHAR(200),
    numero_ordem       INTEGER,
    ativo              BOOLEAN DEFAULT TRUE,
    data_criacao       TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (orixa_regente_id) REFERENCES orixas(id),
    FOREIGN KEY (orixa_adjunto_id) REFERENCES orixas(id)
);

### Dados Iniciais:
- Linha de Oxalá (Pai de todos os Orixás)
- Linha de Iemanjá (Rainha do Mar)
- Linha de Ogum (Guerreiro e Protetor)
- Linha de Oxóssi (Caçador da Mata)
- Linha de Xangô (Senhor da Justiça)  
- Linha de Iansã (Senhora dos Ventos)
- Linha de Oxum (Senhora do Amor)

### Endpoints Necessários:
- [x] Apenas listagem de ativos (/ativos)
- [ ] CRUD completo

### Regras de Negócio:
- Uma linha deve ter SEMPRE um Orixá regente
- Orixá adjunto é opcional
- Linhas inativas não aparecem na listagem
- Ordem é importante para exibição

### Relacionamentos:
- DTO deve incluir apenas IDs dos Orixás (orixaRegenteId, orixaAdjuntoId)
- Não precisa de relacionamento bidirecional
- JPA: @ManyToOne LAZY para os Orixás

### Implementação:
Seguir guidelines padrão com Entity→DTO→Mapper→Repository→Service→Controller
```

---

## 🔄 **Fluxo de Implementação Obrigatório**

1. **Validar** solicitação com checklist
2. **Criar** schema.sql e data.sql
3. **Implementar** na ordem: Entity → DTO → Mapper → Repository → Service → Controller
4. **Criar** testes para cada camada
5. **Executar** testes e corrigir encoding/charset issues
6. **Compilar** projeto completo
7. **Validar** endpoints via Swagger ou testes de integração
